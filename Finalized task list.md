Finalized task list

| #  | Task Name                             | Type     | Location                                       | Description                                                                                                              |
|---:|---------------------------------------|----------|------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| 1  | News Listing Page                     | create   | `pages/news/index.tsx`                         | Build the `/news` index: fetch `getLatestNews()`, render list of `NewsCard` items with `TariffMetric` teasers.           |
| 2  | News Detail Page                      | create   | `pages/news/[slug].tsx`                        | Dynamic article page: fetch `getArticle(slug)`, render full content, `TariffMetric`, and related `ProductGrid`.          |
| 3  | Country Detail Page                   | create   | `pages/countries/[code].tsx`                   | Dynamic country page: fetch `getCountryByCode(code)` and `getProductsWithTariffs(code)`, show flag, sparkline, grid. **[COMPLETE: Implemented as modal on /countries page; [code].tsx route not required for current requirements]** |
| 4  | Email Subscription API                | create   | `pages/api/subscribe.ts`                       | POST endpoint to accept `{ email, countries: [] }`, write to `Subscriber` schema, return success/error JSON.              |
| 5  | TariffMetric Component                | create   | `components/features/TariffMetric.tsx`         | Renders single highest-rate + countdown + "See details" trigger; props: `{ rate, effectiveDate, onDetailsClick }`.      |
| 6  | DrilldownTable Component              | create   | `components/ui/DrilldownTable.tsx`             | Table or list of all country-by-country rates + dates; used in modal or hover tooltip when "See details" is clicked.     |
| 7  | Modal Wrapper                         | create   | `components/ui/Modal.tsx`                      | Generic modal foundation to host `DrilldownTable` or subscription forms; manages open/close and backdrop.                |
| 8  | CountdownTimer Component              | create   | `components/ui/CountdownTimer.tsx`             | Displays "X days left" until an `effectiveDate`; auto-updates daily.                                                     |
| 9  | SparklineChart Component              | create   | `components/ui/SparklineChart.tsx`             | Simple 12-month line/sparkline using historical rates (via `<canvas>` or SVG).                                          |
| 10 | CountryWatch Component                | create   | `components/features/CountryWatch.tsx`         | UI for "Watch this country" toggle + email input; calls `/api/subscribe`.                                                |
| 11 | ABTestWrapper HOC                     | create   | `components/utils/ABTestWrapper.tsx`           | Higher-order component or hook to toggle between two variants (e.g. "highest rate" vs. "earliest date").                  |
| 12 | ProductGrid Sorting & Filtering       | modify   | `components/features/ProductGrid.tsx`          | Add controls for sort by "Highest Tariff" / "Alphabetical" and filters by country & category.                            |
| 13 | SWR/React-Query Hook                  | create   | `hooks/useProductData.ts`                      | Wrap `lib/sanity/queries` calls in a data-fetch hook with caching, revalidation, and loading/error states.                |
| 14 | RateHistory Object Schema             | create   | `sanity/schemaTypes/rateHistory.ts`            | Defines `{ date: 'date', rate: 'number' }`; to be referenced in `tariffUpdate`.                                          |
| 15 | Extend TariffUpdate Schema            | modify   | `sanity/schemaTypes/tariffUpdate.ts`           | Add field `history: [rateHistory]`; add validation for `newRate`; ensure references to `imposingCountry` & `impactedCountry`. |
| 16 | Subscriber Document Schema            | create   | `sanity/schemaTypes/subscriber.ts`             | Fields: `email: string`, `countriesWatched: [referenceâ†’country]`, `createdAt: datetime`.                                   |
| 17 | Update Tag Schema Validation          | modify   | `sanity/schemaTypes/tag.ts`                    | Adjust `type` field's `options.list` to `['country','industry','product_category','attribute']`.                         |
| 18 | Enhance Queries for Rate History      | modify   | `lib/sanity/queries.ts`                        | Add GROQ function `getRateHistory(id)` and extend `getProductsWithTariffs` to fetch latest `newRate` + `history` array.  |
| 19 | Integrate Components in Homepage      | modify   | `app/page.tsx`                                  | Swap out generic BreakingNews with `NewsCard` + `TariffMetric`; add sparkline & "Watch" UI under CountryGrid.            |
| 20 | Dynamic SEO Meta Tags                 | modify   | `app/layout.tsx`  (or `<Head>` in pages)       | Use page-specific data (`title`, `description`, `og:image`) for `/news/[slug]`, `/countries/[code]`, `/products`.        |
| 21 | Mobile-First CSS Audit                | modify   | `components/**/*`                              | Ensure all new & existing components use responsive Tailwind or CSS: touch-friendly modals, grid stacks, font sizes.    |
